<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="<{$xoops_langcode}>" lang="<{$xoops_langcode}>">
<head>
<meta http-equiv="content-type" content="text/html; charset=<{$xoops_charset}>" />
<meta http-equiv="content-language" content="<{$xoops_langcode}>" />
<meta name="robots" content="<{$xoops_meta_robots}>" />
<meta name="keywords" content="<{$xoops_meta_keywords}>" />
<meta name="description" content="<{$xoops_meta_description}>" />
<meta name="rating" content="<{$xoops_meta_rating}>" />
<meta name="author" content="<{$xoops_meta_author}>" />
<meta name="copyright" content="<{$xoops_meta_copyright}>" />
<meta name="generator" content="XOOPS" />
<title><{$xoops_sitename}> - <{$xoops_pagetitle}></title>
<link href="<{$xoops_url}>/favicon.ico" rel="SHORTCUT ICON" />
<link rel="stylesheet" type="text/css" media="screen" href="<{$xoops_url}>/xoops.css" />
<link rel="stylesheet" type="text/css" media="screen" href="<{$xoops_themecss}>" />
<script type="text/javascript" src="<{$xoops_imageurl}>prototype.js"></script>
<script type="text/javascript" src="<{$xoops_imageurl}>rico.js"></script>
<!-- RMV: added module header -->
<{$xoops_module_header}>
<script type="text/javascript">
<!--
<{$xoops_js}>
//-->
</script>

<script type="text/javascript">
<!--
window.onload = function()
{

<{foreach name=lblockcount item=block from=$xoops_lblocks}>
dndMgr.registerDropZone( new Rico.Dropzone("ldropzone<{$smarty.foreach.lblockcount.iteration}>") );
<{/foreach}>

<{if $xoops_showcblock == 1}>
<{foreach name=ccblockcount item=block from=$xoops_ccblocks}>
dndMgr.registerDropZone( new Rico.Dropzone("ccdropzone<{$smarty.foreach.ccblockcount.iteration}>") );
<{/foreach}>
<{foreach name=clblockcount item=block from=$xoops_clblocks}>
dndMgr.registerDropZone( new Rico.Dropzone("cldropzone<{$smarty.foreach.clblockcount.iteration}>") );
<{/foreach}>
<{foreach name=crblockcount item=block from=$xoops_crblocks}>
dndMgr.registerDropZone( new Rico.Dropzone("crdropzone<{$smarty.foreach.crblockcount.iteration}>") );
<{/foreach}>
<{/if}>

<{if $xoops_showrblock == 1}>
<{foreach name=rblockcount item=block from=$xoops_rblocks}>
dndMgr.registerDropZone( new Rico.Dropzone("rdropzone<{$smarty.foreach.rblockcount.iteration}>") );
<{/foreach}>
<{/if}>

}
// -->
</script>


<script type="text/javascript">
<!--
   var selectDone = new Array();
   var myDraggable = new Array();

   function toggleSelect(type, htmlelement, selectimg, idnumber) {
      if ( !selectDone[idnumber] ) {
         registerD(type, htmlelement, idnumber);
         selectDone[idnumber] = true;
         $(selectimg).src = '<{$xoops_imageurl}>undrag.gif';
         $(selectimg).alt = 'Click me if you want to fix this block';

      }
      else {
         unregisterD(idnumber);
         selectDone[idnumber] = false;
         $(selectimg).src = '<{$xoops_imageurl}>drag.gif';
         $(selectimg).alt = 'Click me if you want to drag this block';
      }
   }

   function registerD(type, htmlelement, idnumber) {
  myDraggable[idnumber] = new Rico.Draggable(type, htmlelement)
  dndMgr.registerDraggable( myDraggable[idnumber] );
   }

   function unregisterD(idnumber) {
  dndMgr.deregisterDraggable( myDraggable[idnumber] );
   }

// -->
</script>

<script type="text/javascript">
<!--
   var startHeight = new Array();
   var effectDone = new Array();
   var original = new Array();
   function toggleEffect(resizetarget, toggleimg, idnum) {
      if ( !effectDone[idnum] ) {
         original[idnum] = $(resizetarget).innerHTML;
         $(resizetarget).innerHTML = "";
         startEffect(resizetarget);
         effectDone[idnum] = true;
         $(toggleimg).src = '<{$xoops_imageurl}>restore.gif';
         $(toggleimg).alt = 'Click me if you want to restore this block';
      }
      else {
         $(resizetarget).innerHTML = original[idnum];
         resetEffect(resizetarget);
         effectDone[idnum] = false;
         $(toggleimg).src = '<{$xoops_imageurl}>minimize.gif';
         $(toggleimg).alt = 'Click me if you want to minimize this block';
      }
   }

   function startEffect(resizetarget) {
      startHeight = $(resizetarget).offsetHeight;
      new Rico.Effect.Size( $(resizetarget), null, 0, 500, 10, {complete:function() {setStatus();}} );
   }

   function setStatus() {
   }

   function resetEffect(resizetarget) {
      $(resizetarget).style.height = startHeight;
   }
// -->
</script>

</head>
<body>
  <table cellspacing="0">
    <tr id="header">
      <td id="headerlogo"><a href="<{$xoops_url}>/"><img src="<{$xoops_imageurl}>logo.gif" width="150" height="80" alt="" /></a></td>
      <td id="headerbanner"><{$xoops_banner}></td>
    </tr>
    <tr>
      <td id="headerbar" colspan="2">&nbsp;</td>
    </tr>
  </table>

  <table cellspacing="0">
    <tr>
      <td id="leftcolumn">
        <!-- Start left blocks loop -->
        <{foreach name=lblockloop item=block from=$xoops_lblocks}>
	<div id="ldropzone<{$smarty.foreach.lblockloop.iteration}>">
	<div id="DDlblock<{$smarty.foreach.lblockloop.iteration}>">
	<div class="blockTitle">
	<{$block.title}>
	<a href="javascript:toggleSelect('xoopsDDlblock<{$smarty.foreach.lblockloop.iteration}>', 'DDlblock<{$smarty.foreach.lblockloop.iteration}>', 'ldragimage<{$smarty.foreach.lblockloop.iteration}>', <{$smarty.foreach.lblockloop.iteration}> );"><img id="ldragimage<{$smarty.foreach.lblockloop.iteration}>" src="<{$xoops_imageurl}>drag.gif" alt="Click me if you want to drag this block" /></a>&nbsp;<a href="javascript:toggleEffect('resizelblock<{$smarty.foreach.lblockloop.iteration}>', 'lsizeimage<{$smarty.foreach.lblockloop.iteration}>', <{$smarty.foreach.lblockloop.iteration}>)"><img id="lsizeimage<{$smarty.foreach.lblockloop.iteration}>" src="<{$xoops_imageurl}>minimize.gif" alt="Click me if you want to minimize this block" /></a>
	</div>
	<div id="resizelblock<{$smarty.foreach.lblockloop.iteration}>" class="blockContent">
	<{$block.content}>
	</div>
	</div>
	</div>
        <{/foreach}>
        <!-- End left blocks loop -->

      </td>

      <td id="centercolumn">

        <!-- Display center blocks if any -->
        <{if $xoops_showcblock == 1}>

        <table cellspacing="0">
          <tr>
            <td id="centerCcolumn" colspan="2">

            <!-- Start center-center blocks loop -->
            <{foreach name=ccblockloop item=block from=$xoops_ccblocks}>
	<div id="ccdropzone<{$smarty.foreach.ccblockloop.iteration}>">
	<div id="DDccblock<{$smarty.foreach.ccblockloop.iteration}>">
	<div style="padding: 5px;">
  	<fieldset>
    	<legend class="blockTitle"><{$block.title}>
	<a href="javascript:toggleSelect('xoopsDDccblock<{$smarty.foreach.ccblockloop.iteration}>', 'DDccblock<{$smarty.foreach.ccblockloop.iteration}>', 'ccdragimage<{$smarty.foreach.ccblockloop.iteration}>', <{$smarty.foreach.lblockloop.iteration+$smarty.foreach.ccblockloop.iteration}> );"><img id="ccdragimage<{$smarty.foreach.ccblockloop.iteration}>" src="<{$xoops_imageurl}>drag.gif" alt="Click me if you want to drag this block" /></a>&nbsp;<a href="javascript:toggleEffect('resizeccblock<{$smarty.foreach.ccblockloop.iteration}>', 'ccsizeimage<{$smarty.foreach.ccblockloop.iteration}>', <{$smarty.foreach.lblockloop.iteration+$smarty.foreach.ccblockloop.iteration}>)"><img id="ccsizeimage<{$smarty.foreach.ccblockloop.iteration}>" src="<{$xoops_imageurl}>minimize.gif" alt="Click me if you want to minimize this block" /></a>
	</legend>
    	<div  id="resizeccblock<{$smarty.foreach.ccblockloop.iteration}>" class="blockContent"><{$block.content}></div>
  	</fieldset>
	</div>
	</div>
	</div>
            <{/foreach}>
            <!-- End center-center blocks loop -->

            </td>
          </tr>
          <tr>
            <td id="centerLcolumn">

            <!-- Start center-left blocks loop -->
              <{foreach name=clblockloop item=block from=$xoops_clblocks}>
	<div id="cldropzone<{$smarty.foreach.clblockloop.iteration}>">
	<div id="DDclblock<{$smarty.foreach.clblockloop.iteration}>">
	<div style="padding: 0px 0px 0px 8px;">
  	<fieldset>
    	<legend class="blockTitle"><{$block.title}>
	<a href="javascript:toggleSelect('xoopsDDclblock<{$smarty.foreach.clblockloop.iteration}>', 'DDclblock<{$smarty.foreach.clblockloop.iteration}>', 'cldragimage<{$smarty.foreach.clblockloop.iteration}>', <{$smarty.foreach.lblockloop.iteration+$smarty.foreach.ccblockloop.iteration+$smarty.foreach.clblockloop.iteration}> );"><img id="cldragimage<{$smarty.foreach.clblockloop.iteration}>" src="<{$xoops_imageurl}>drag.gif" alt="Click me if you want to drag this block" /></a>&nbsp;<a href="javascript:toggleEffect('resizeclblock<{$smarty.foreach.clblockloop.iteration}>', 'clsizeimage<{$smarty.foreach.clblockloop.iteration}>', <{$smarty.foreach.lblockloop.iteration+$smarty.foreach.ccblockloop.iteration+$smarty.foreach.clblockloop.iteration}>)"><img id="clsizeimage<{$smarty.foreach.clblockloop.iteration}>" src="<{$xoops_imageurl}>minimize.gif" alt="Click me if you want to minimize this block" /></a>
	</legend>
    	<div  id="resizeclblock<{$smarty.foreach.clblockloop.iteration}>" class="blockContent"><{$block.content}></div>
  	</fieldset>
	</div>
	</div>
	</div>
              <{/foreach}>
            <!-- End center-left blocks loop -->

            </td><td id="centerRcolumn">

            <!-- Start center-right blocks loop -->
              <{foreach name=crblockloop item=block from=$xoops_crblocks}>
	<div id="crdropzone<{$smarty.foreach.crblockloop.iteration}>">
	<div id="DDcrblock<{$smarty.foreach.crblockloop.iteration}>">
	<div style="padding: 0px 5px 0px 0px;">
  	<fieldset>
    	<legend class="blockTitle"><{$block.title}>
	<a href="javascript:toggleSelect('xoopsDDcrblock<{$smarty.foreach.crblockloop.iteration}>', 'DDcrblock<{$smarty.foreach.crblockloop.iteration}>', 'crdragimage<{$smarty.foreach.crblockloop.iteration}>', <{$smarty.foreach.lblockloop.iteration+$smarty.foreach.ccblockloop.iteration+$smarty.foreach.clblockloop.iteration+$smarty.foreach.crblockloop.iteration}> );"><img id="crdragimage<{$smarty.foreach.crblockloop.iteration}>" src="<{$xoops_imageurl}>drag.gif" alt="Click me if you want to drag this block" /></a>&nbsp;<a href="javascript:toggleEffect('resizecrblock<{$smarty.foreach.crblockloop.iteration}>', 'crsizeimage<{$smarty.foreach.crblockloop.iteration}>', <{$smarty.foreach.lblockloop.iteration+$smarty.foreach.ccblockloop.iteration+$smarty.foreach.clblockloop.iteration+$smarty.foreach.crblockloop.iteration}>)"><img id="crsizeimage<{$smarty.foreach.crblockloop.iteration}>" src="<{$xoops_imageurl}>minimize.gif" alt="Click me if you want to minimize this block" /></a>
	</legend>
    	<div  id="resizecrblock<{$smarty.foreach.crblockloop.iteration}>" class="blockContent"><{$block.content}></div>
  	</fieldset>
	</div>
	</div>
	</div>
              <{/foreach}>
            <!-- End center-right blocks loop -->

            </td>
          </tr>
        </table>

        <{/if}>
        <!-- End display center blocks -->

        <div id="content">
          <{$xoops_contents}>
        </div>
      </td>

      <{if $xoops_showrblock == 1}>

      <td id="rightcolumn">
        <!-- Start right blocks loop -->
        <{foreach name=rblockloop item=block from=$xoops_rblocks}>
	<div id="rdropzone<{$smarty.foreach.rblockloop.iteration}>">
	<div id="DDrblock<{$smarty.foreach.rblockloop.iteration}>">
	<div class="blockTitle"><{$block.title}>
	<a href="javascript:toggleSelect('xoopsDDrblock<{$smarty.foreach.rblockloop.iteration}>', 'DDrblock<{$smarty.foreach.rblockloop.iteration}>', 'rdragimage<{$smarty.foreach.rblockloop.iteration}>', <{$smarty.foreach.lblockloop.iteration+$smarty.foreach.ccblockloop.iteration+$smarty.foreach.clblockloop.iteration+$smarty.foreach.crblockloop.iteration+$smarty.foreach.rblockloop.iteration}> );"><img id="rdragimage<{$smarty.foreach.rblockloop.iteration}>" src="<{$xoops_imageurl}>drag.gif" alt="Click me if you want to drag this block" /></a>&nbsp;<a href="javascript:toggleEffect('resizerblock<{$smarty.foreach.rblockloop.iteration}>', 'rsizeimage<{$smarty.foreach.rblockloop.iteration}>', <{$smarty.foreach.lblockloop.iteration+$smarty.foreach.ccblockloop.iteration+$smarty.foreach.clblockloop.iteration+$smarty.foreach.crblockloop.iteration+$smarty.foreach.rblockloop.iteration}>)"><img id="rsizeimage<{$smarty.foreach.rblockloop.iteration}>" src="<{$xoops_imageurl}>minimize.gif" alt="Click me if you want to minimize this block" /></a>
	</div>
    	<div  id="resizerblock<{$smarty.foreach.rblockloop.iteration}>" class="blockContent"><{$block.content}></div>
	</div>
	</div>
        <{/foreach}>
        <!-- End right blocks loop -->
      </td>

      <{/if}>

    </tr>
  </table>

  <table cellspacing="0">
    <tr id="footerbar">
      <td><a href="http://jp.xoops.org/" target="_blank"><img src="<{$xoops_imageurl}>poweredby.gif" alt="" /></a></td>
    </tr>
  </table>
</body>
</html>
